(this.webpackJsonpduyin=this.webpackJsonpduyin||[]).push([[0],{11:function(t,e,n){"use strict";n.r(e);var o,r,l,i,a,s,u,g,d,c,h,f,p,m,v,A,E=n(1),b=n.n(E),S=n(3),O=n.n(S),y=(n(8),n(9),n.p+"static/media/6603-17.1ae13ed0.svg"),N=[],x=2e3,B=2e3,w=1,P=!1;function T(t,e){var n=x,r=t.svgElement[0].flowPath.getPointAtLength(0),l=t.svgElement[0].flowPath.getPointAtLength(t.svgElement[0].flowPath.getTotalLength());if(e<t.PosX&&r.x===l.x&&r.y===l.y&&(n=0),e>t.svgElement[0].flowPath.getTotalLength()&&(n=0,e=t.svgElement[0].flowPath.getTotalLength()),t.PosX!=e){t.svgElement.forEach((function(o){return o.grpObj.animate({offsetDistance:100*e/t.svgElement[0].flowPath.getTotalLength()+"%"},{fill:"forwards",duration:n,iterations:1})})),t.LOCKED&&t.lockIcon.animate({offsetDistance:100*e/t.svgElement[0].flowPath.getTotalLength()+"%"},{fill:"forwards",duration:n,iterations:1}),t.udcObjArr.forEach((function(o){o.udcObj.animate({offsetDistance:100*e/t.svgElement[0].flowPath.getTotalLength()+"%"},{fill:"forwards",duration:n,iterations:1})}));var i=t.svgElement[0].flowPath.getPointAtLength(e);t.Id_Percorso&&t.svgElement[0].seqObj.animate({d:'path("M'+i.x+","+i.y+" L"+t.svgElement[0].destObj.center.x+","+t.svgElement[0].destObj.center.y+'")'},{fill:"forwards",duration:n,iterations:1}),o.filter((function(e){return e.DEST==t.ASI})).forEach((function(t){t&&t.svgElement[0].seqObj&&t.svgElement[0].seqObj.animate({d:'path("M'+t.svgElement[0].center.x+","+t.svgElement[0].center.y+" L"+i.x+","+i.y+'")'},{fill:"forwards",duration:n,iterations:1})})),t.PosX=e}}function L(t,e,n){if(n.svgElement.length>0){var o,r=n.svgElement[n.svgElement.length-1],l=0;if(1==e.Rotation?l=90:2==e.Rotation?l=180:3==e.Rotation?l=270:e.Rotation&&(l=e.Rotation),r.grpObj.parentElement.appendChild(t.udcObj),r.grpObj.style.offsetPath)t.udcObj.style.offsetPath=r.grpObj.style.offsetPath,t.udcObj.style.offsetDistance=n.PosX+"px",t.udcObj.style.offsetRotate="auto "+l+"deg",t.udcObj.style.willChange="transform",t.udcObj.style.offsetAnchor=t.udcObj.getBBox().x+t.udcObj.getBBox().width/2*t.xScale+"px "+(t.udcObj.getBBox().y+t.udcObj.getBBox().height/2*t.yScale)+"px";else if(t.udcObj.style.offsetPath=null,t.udcObj.style.offsetRotate=null,t.udcObj.style.offsetAnchor=null,t.udcObj.style.offsetDistance=null,t.udcObj.style.willChange=null,r.rackOriginObjX){var i,s,u=r.grpObj.getBBox().width/2;null!=e.QuotaDepositoX&&(u=3.543*e.QuotaDepositoX),i=r.rackOriginObjX.getPointAtLength(r.renderLength+u).x-r.rackOriginObjX.getPointAtLength(0).x,s=r.rackOriginObjX.getPointAtLength(r.renderLength+u).y-r.rackOriginObjX.getPointAtLength(0).y,o=a.createSVGPoint();var g=r.grpObj.getBBox().height/2;null!=e.QuotaDeposito&&(g=3.543*e.QuotaDeposito),o.x=r.rackOriginObjZ.getPointAtLength(g).x+i,o.y=r.rackOriginObjZ.getPointAtLength(g).y+s}else o=r.center;var d="";o&&(d="translate("+[o.x-t.udcObj.getBBox().width*t.xScale/2,o.y-t.udcObj.getBBox().height*t.yScale/2]+")");var c="";o&&(c="rotate("+e.Rotation+", "+o.x+", "+o.y+")");var h=c+d+("scale("+t.xScale+","+t.yScale+")");t.udcObj.setAttributeNS(null,"transform",h)}else t.udcObj.remove();n.udcObjArr.push(t)}function I(t,e){return{x:e.x*t.a+e.y*t.c+0,y:e.x*t.b+e.y*t.d+0}}function j(t){var e=I(t,{x:0,y:1}),n=I(t,{x:1,y:0}),o=180/Math.PI*Math.atan2(e.y,e.x)-90;o<0&&(o=360- -1*o);var r=180/Math.PI*Math.atan2(n.y,n.x);return{translateX:t.e,translateY:t.f,scaleX:Math.sqrt(t.a*t.a+t.b*t.b),scaleY:Math.sqrt(t.c*t.c+t.d*t.d),skewX:o,skewY:r,rotation:o}}function R(t,e,n,o){var r=n.createSVGPoint(),l=o.getCTM();return r.x=t,r.y=e,r.matrixTransform(l)}function C(t,e,n){return n.indexOf(t)===e}function _(t,e,n,i,u){!e.getAnimations().some((function(t){return"paused"==t.playState}))||u?((l=new XMLHttpRequest).onreadystatechange=function(){if(4==l.readyState&&200==l.status)try{var t=JSON.parse(l.responseText);if(t=t.map((function(t){return t.LARGHEZZA=t.LARGHEZZA?t.LARGHEZZA/i:t.LARGHEZZA,t.PROFONDITA=t.PROFONDITA?t.PROFONDITA/i:t.PROFONDITA,t.ALTEZZA=t.ALTEZZA?t.ALTEZZA/i:t.ALTEZZA,t.LARGHEZZATUNNEL=t.LARGHEZZATUNNEL?t.LARGHEZZATUNNEL/i:t.LARGHEZZATUNNEL,t.OffsetSottoComponente=t.OffsetSottoComponente?t.OffsetSottoComponente/i:t.OffsetSottoComponente,t.QuotaDeposito=t.QuotaDeposito?t.QuotaDeposito/i:t.QuotaDeposito,t.QuotaDepositoX=t.QuotaDepositoX?t.QuotaDepositoX/i:t.QuotaDepositoX,t.posHeight=t.posHeight?t.posHeight/i:t.posHeight,t.posLength=t.posLength?t.posLength/i:t.posLength,t.posWidth=t.posWidth?t.posWidth/i:t.posWidth,t.PosX=t.PosX?t.PosX/i:t.PosX,0==P&&(t.Id_Percorso=null,t.Sequenza_Percorso=null),t})),(0==o.length||u)&&(t.forEach((function(t){var n=o.find((function(e){return e.ASI==t.SORG}));if(!n)if(n={ASI:t.SORG,ID_COMPONENTE:t.ID_COMPONENTE,PIANO:t.PIANO,COLONNA:t.COLONNA,PARTITION:t.PARTITION,Id_Percorso:null,Sequenza_Percorso:null,Id_Tipo_Stato_Percorso:null,svgElement:[],Rotation:t.Rotation,udcObjArr:[],hasFault:!1,hasWarning:!1,ALTEZZA:t.posHeight*i,LUNGHEZZA:t.posLength*i,LARGHEZZA:t.posWidth*i},o.push(n),"S"==t.ID_TIPO_COMPONENTE){var r=e.querySelector("[id*='"+t.SORG.substring(0,4)+"."+t.PARTITION+".x']"),l=e.querySelector("[id*='"+t.SORG.substring(0,4)+"."+t.PARTITION+".z']");if(r&&l){var s=0,u=o.find((function(e){return e.ID_COMPONENTE==t.ID_COMPONENTE&&e.PIANO==t.PIANO&&e.PARTITION==t.PARTITION&&e.COLONNA==t.COLONNA-1}));u&&(s=u.svgElement[0].renderLength-u.svgElement[0].OffsetSottoComponente+u.svgElement[0].LARGHEZZATUNNEL+500/i),t.svgOFFSET&&(s+=3.543*t.svgOFFSET/i),t.OffsetSottoComponente&&(s+=3.543*t.OffsetSottoComponente/i);var g=r.getPointAtLength(s).x-r.getPointAtLength(0).x,c=r.getPointAtLength(s).y-r.getPointAtLength(0).y,h=l.getPointAtLength(0).x+g,f=l.getPointAtLength(0).y+c,p=l.getPointAtLength(3.543*t.posLength).x+g,m=l.getPointAtLength(3.543*t.posLength).y+c;g=r.getPointAtLength(s+3.543*t.posWidth).x-r.getPointAtLength(0).x,c=r.getPointAtLength(s+3.543*t.posWidth).y-r.getPointAtLength(0).y;var v=l.getPointAtLength(0).x+g,A=l.getPointAtLength(0).y+c,E=l.getPointAtLength(3.543*t.posLength).x+g,b=l.getPointAtLength(3.543*t.posLength).y+c,S=e.createElementNS(e.rootElement.namespaceURI,"polygon"),O=e.createElementNS(e.rootElement.namespaceURI,"g");O.append(S);var y="";y+=h+","+f,y+=" "+p+","+m,y+=" "+E+","+b,y+=" "+v+","+A,S.setAttributeNS(null,"points",y),S.setAttributeNS(null,"id",t.SORG),S.style.pointerEvents="auto",d.appendChild(O),"OO"==t.ID_TIPO_PARTIZIONE?S.setAttributeNS(null,"fill","#333333"):S.setAttributeNS(null,"fill","#C2C2C2"),n.svgElement.push({grpObj:S,x:null,y:null,txtObj:null,renderLength:s,LARGHEZZATUNNEL:3.543*t.LARGHEZZATUNNEL,svgOFFSET:3.543*t.svgOFFSET||0,OffsetSottoComponente:3.543*t.OffsetSottoComponente||0,yScale:1,xScale:1,rackOriginObjX:r,rackOriginObjZ:l,center:R(S.getBBox().x+S.getBBox().width/2,S.getBBox().y+S.getBBox().height/2,a,S)}),r.setAttributeNS(null,"visibility","hidden"),l.setAttributeNS(null,"visibility","hidden")}}else{var N=e.querySelectorAll("[id*='"+t.SORG+"']:not([id*='flowPath'])");0==N.length?console.error(t.SORG+" non trovato nell'SVG."):N.forEach((function(o,r){var l=o.getBBox().width/o.getBBox().height;t.svg&&t.svg.includes("rulliera.")&&(l>2||l<.5?t.svg=t.svg.replace("rulliera.","rullieraL."):(l>1.3||l<=.7)&&(t.svg=t.svg.replace("rulliera.","rullieraM.")));var i=new XMLHttpRequest;i.open("GET",t.svg.split(",")[r],!0),i.onload=function(l){var s,u=(new DOMParser).parseFromString(i.responseText,"image/svg+xml").getElementsByTagName("g")[0],g=1,c=1,h=null;if("T"==t.ID_TIPO_COMPONENTE){var f=t.SORG.length+1;do{h=e.querySelector("[id^='flowPath"+t.SORG.substring(0,f)+"']"),f-=1}while(!h&&f>1&&0==isNaN(t.SORG.charAt(f)))}if(s=R(o.getBBox().x+o.getBBox().width/2,o.getBBox().y+o.getBBox().height/2,a,o),u){u.id=t.SORG+"-"+r;var p="",m=e.createElementNS(e.rootElement.namespaceURI,"g");if(m.appendChild(u),h){var v=e.getElementById("gMotion"+h.id);v||((v=e.createElementNS(e.rootElement.namespaceURI,"g")).id="gMotion"+h.id,a.appendChild(v)),v.appendChild(m)}else{d.appendChild(m);var A=j(o.getCTM()).rotation;o.getBBox().width>o.getBBox().height&&(A+=90),A&&(p="rotate("+A+" "+s.x+" "+s.y+")")}g=(o.getBBox().width>o.getBBox().height?o.getBBox().height:o.getBBox().width)*j(o.getCTM()).scaleX/u.getBBox().width,c=(o.getBBox().width>o.getBBox().height?o.getBBox().width:o.getBBox().height)*j(o.getCTM()).scaleY/u.getBBox().height;var E="";h||(E="translate("+[s.x-u.getBBox().width*g/2,s.y-u.getBBox().height*c/2]+")");var b=p+E+("scale("+g+","+c+")");u.setAttributeNS(null,"transform",b),u.style.pointerEvents="auto",o.setAttributeNS(null,"visibility","hidden")}else{if(u=e.createElementNS(e.rootElement.namespaceURI,"g"),d.appendChild(u),o.removeAttributeNS(null,"id"),h&&(o.removeAttributeNS(null,"transform"),o.setAttributeNS(null,"x",0),o.setAttributeNS(null,"y",0),o.getBBox().width>o.getBBox().height)){var S=o.getBBox().height,O=o.getBBox().width;o.setAttributeNS(null,"width",S),o.setAttributeNS(null,"height",O)}u.id=t.SORG,u.appendChild(o)}n.svgElement.push({grpObj:u,x:null,y:null,txtObj:null,flowPath:h,Rotation:t.Rotation,xScale:g,yScale:c,center:s}),h&&("path"==h.tagName?u.style.offsetPath="path('"+h.getAttributeNS(null,"d")+"')":"line"==h.tagName&&(u.style.offsetPath="path('M"+h.getAttributeNS(null,"x1")+" "+h.getAttributeNS(null,"y1")+",L"+h.getAttributeNS(null,"x2")+" "+h.getAttributeNS(null,"y2")+"')"),u.style.offsetRotate="auto 90deg",u.style.offsetAnchor=u.getBBox().x+u.getBBox().width/2*g+"px "+(u.getBBox().y+u.getBBox().height/2*c)+"px",h.setAttributeNS(null,"visibility","hidden"),u.style.willChange="transform",T(n,0)),n.persistent=!0},i.send()}))}})),!u))try{var n,r,s,g,h,f,p;e.addEventListener("pointerover",(function(t){if(t.target.parentElement){var n=e.createElementNS("http://www.w3.org/2000/svg","rect");n.setAttributeNS(null,"class","statusLayer"),n.style.pointerEvents="none",n.setAttributeNS(null,"width",t.target.parentElement.getBBox().width),n.setAttributeNS(null,"height",t.target.parentElement.getBBox().height),n.setAttributeNS(null,"x",t.target.parentElement.getBBox().x),n.setAttributeNS(null,"y",t.target.parentElement.getBBox().y),t.target.parentElement.append(n),t.target.parentElement.onpointerout=function(){n.remove()}}})),e.addEventListener("pointerout",(function(t){t.target.parentElement&&t.target.parentElement.querySelectorAll(".statusLayer").forEach((function(t){return t.remove()}))})),null===(n=a.getElementById("macchine"))||void 0===n||n.setAttributeNS(null,"visibility","hidden"),null===(r=a.getElementById("catenarie"))||void 0===r||r.setAttributeNS(null,"visibility","hidden"),null===(s=a.getElementById("rulliere"))||void 0===s||s.setAttributeNS(null,"visibility","hidden"),null===(g=a.getElementById("Switcher"))||void 0===g||g.setAttributeNS(null,"visibility","hidden"),null===(h=a.getElementById("ralle"))||void 0===h||h.setAttributeNS(null,"visibility","hidden"),null===(f=a.getElementById("magazzino"))||void 0===f||f.setAttributeNS(null,"visibility","hidden"),null===(p=a.getElementById("flowpath"))||void 0===p||p.setAttributeNS(null,"visibility","hidden")}catch(m){console.log(m)}o.forEach((function(e){e.udcObjArr.filter((function(e){return void 0==t.find((function(t){return e.Id_Udc==t.Id_Udc}))})).forEach((function(t){t.udcObj.remove(),t.Id_Udc=null})),e.udcObjArr=e.udcObjArr.filter((function(t){return null!=t.Id_Udc}))})),o.filter((function(e){return void 0==t.find((function(t){return e.Id_Percorso==t.Id_Percorso&&e.Sequenza_Percorso==t.Sequenza_Percorso}))})).forEach((function(t){t.svgElement.forEach((function(t){t.seqObj&&t.seqObj.remove(),t.seqObj=null})),t.Id_Percorso=null,t.Sequenza_Percorso=null,t.DEST=null})),t.forEach((function(t){var n;n=o.find((function(e){return e.ASI==t.SORG}));try{if(t.DEST){var r=o.find((function(e){return e.Id_Percorso==t.Id_Percorso&&e.Sequenza_Percorso==t.Sequenza_Percorso})),l=void 0,s=void 0;switch(t.Id_Tipo_Stato_Percorso){case 2:s="green";break;case 4:s="yellow";break;default:s="#007bff"}if(r)r.Id_Percorso&&r.Id_Tipo_Stato_Percorso!=t.Id_Tipo_Stato_Percorso&&(n.Id_Tipo_Stato_Percorso=t.Id_Tipo_Stato_Percorso,n.svgElement[0].seqObj.style.stroke=s,n.svgElement[0].seqObj.setAttributeNS(null,"marker-end","url(#markerTriangolo"+t.Id_Tipo_Stato_Percorso+")"));else{l=o.find((function(e){return e.ASI==t.DEST}));var u=e.createElementNS("http://www.w3.org/2000/svg","path");if(l&&l.svgElement.length>0&&n.svgElement.length>0){c.appendChild(u);var g=l.svgElement[0].center;l.svgElement[0].flowPath&&(g=l.svgElement[0].flowPath.getPointAtLength(l.PosX),e.getElementById("gMotion"+l.svgElement[0].flowPath.id).appendChild(u));var d=n.svgElement[0].center;n.svgElement[0].flowPath&&(d=n.svgElement[0].flowPath.getPointAtLength(n.PosX),e.getElementById("gMotion"+n.svgElement[0].flowPath.id).appendChild(u)),(n.svgElement[0].flowPath||l.svgElement[0].flowPath)&&(u.style.willChange="transform"),u.setAttributeNS(null,"d","M"+d.x+" "+d.y+" L"+g.x+" "+g.y),u.setAttributeNS(null,"marker-end","url(#markerTriangolo"+t.Id_Tipo_Stato_Percorso),u.style.stroke=s,u.style.strokeWidth=300/i,n.Id_Percorso=t.Id_Percorso,n.Sequenza_Percorso=t.Sequenza_Percorso,n.Id_Tipo_Stato_Percorso=t.Id_Tipo_Stato_Percorso,n.svgElement[0].seqObj=u,n.svgElement[0].destObj=l.svgElement[0],n.DEST=t.DEST}}}var h=null,f=null;if(0!=t.Id_Udc&&-1==n.udcObjArr.findIndex((function(e){return t.Id_Udc==e.Id_Udc}))){var p=null,v=null,A=null,E=!0,b=!1,S=void 0;try{for(var O,y=o[Symbol.iterator]();!(E=(O=y.next()).done);E=!0){var N=O.value;if(-1!=(v=N.udcObjArr.findIndex((function(e){return t.Id_Udc==e.Id_Udc})))){p=N;break}}}catch(w){b=!0,S=w}finally{try{!E&&y.return&&y.return()}finally{if(b)throw S}}if(p)A=p.udcObjArr[v],h=p.udcObjArr[v].udcObj,f=h.getElementsByTagName("rect")[0],h&&p.udcObjArr.splice(v,1),A.LARGHEZZA/i==t.LARGHEZZA&&A.LUNGHEZZA/i==t.PROFONDITA||(A.LARGHEZZA=t.LARGHEZZA*i,A.LUNGHEZZA=t.PROFONDITA*i,A.xScale=3.453*t.LARGHEZZA/h.getBBox().width,A.yScale=3.453*t.PROFONDITA/h.getBBox().height),L(A,t,n);else{var x=new XMLHttpRequest;x.open("GET",t.svgUdc,!0),x.onload=function(o){var r=(new DOMParser).parseFromString(x.responseText,"image/svg+xml").getElementsByTagName("g")[0],l=3.543*(t.LARGHEZZA?t.LARGHEZZA:800/i||1),s=3.543*(t.PROFONDITA?t.PROFONDITA:1200/i||1),u=1,g=1;r?(a.appendChild(r),u=l/r.getBBox().width,g=s/r.getBBox().height):((r=e.createElementNS("http://www.w3.org/2000/svg","g")).id="udc"+t.Id_Udc,(f=e.createElementNS("http://www.w3.org/2000/svg","rect")).setAttributeNS(null,"width",l),f.setAttributeNS(null,"height",s),f.setAttributeNS(null,"x",0),f.setAttributeNS(null,"y",0),f.style.fill=t.udcColour||"#007bff",r.appendChild(f)),r.id="udc"+t.Id_Udc,r.style.pointerEvents="auto",L(A={Id_Udc:t.Id_Udc,emptyUdc:!0,emptyUdcObj:null,Codice_Udc:t.Codice_Udc,udcObj:r,epObj:t,xScale:u,yScale:g,LARGHEZZA:t.LARGHEZZA*i,LUNGHEZZA:t.PROFONDITA*i},t,n)},x.addEventListener("error",(function(){setTimeout((function(){x.open("GET",t.svgUdc,!0),x.send()}),1e3)})),x.send()}}if((t.LOCKED!=n.LOCKED||void 0==n.LOCKED)&&n.svgElement.length>0)if(n.LOCKED=t.LOCKED,n.Motivo_Blocco=t.Motivo_Blocco,t.LOCKED)setTimeout((function(){var t=new XMLHttpRequest;t.open("GET","App/SVG/Icons/lock.svg",!0),t.onload=function(o){var r=new DOMParser,l=e.createElementNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"id","lock"+n.ASI),l.appendChild(r.parseFromString(t.responseText,"image/svg+xml").getElementsByTagName("svg")[0]),l.childNodes[0].setAttributeNS(null,"width",60),l.childNodes[0].setAttributeNS(null,"height",60),l.childNodes[0].setAttributeNS(null,"viewbox","0 0 60 60"),n.svgElement[0].grpObj.parentElement.appendChild(l),n.svgElement[0].flowPath?(l.style.offsetPath=n.svgElement[0].grpObj.style.offsetPath,l.style.offsetDistance=n.PosX+"px",l.style.offsetRotate="auto "+n.Rotation+"deg",l.style.willChange="transform",l.style.offsetAnchor=l.getBBox().x+l.getBBox().width/2+"px "+(l.getBBox().y+l.getBBox().height/2)+"px"):l.setAttributeNS(null,"transform","translate("+[n.svgElement[0].center.x-30,n.svgElement[0].center.y-30]+")"),n.lockIcon=l},t.send()}),500);else{var B=e.getElementById("lock"+n.ASI);n.lockIcon=null,B&&B.remove()}}catch(m){console.log(m,m.message)}}))}catch(m){console.log(m,m.message)}},l.addEventListener("loadend",(function(){r=setTimeout(_,B,s+"/Scada/0/"+w,e,n,i)})),l.open("GET",t,!0),l.send(null)):r=setTimeout(_,B,s+"/Scada/0/"+w,e,n,i)}function Z(t,e){g.getAnimations().some((function(t){return"paused"==t.playState}))?setTimeout(Z,x,t,e):((i=new XMLHttpRequest).onreadystatechange=function(){if(4==i.readyState&&200==i.status){var t=JSON.parse(i.responseText);t.filter((function(t){return 10==t.tagType&&1==t.value})).length>0?p||((p=document.createElement("button")).setAttribute("class","btn btn-danger m-2 float-none"),p.innerText="RESET FAULT",p.onclick=function(t){var e=new XMLHttpRequest;e.onreadystatechange=function(){4==e.readyState&&200==e.status&&console.log(e.responseText)},e.open("GET",u+"/psm/resetFault",!0),e.setRequestHeader("Content-Type","application/json;charset=UTF-8"),e.send()},v.appendChild(p)):p&&(p.remove(),p=null),t.filter((function(t){return 9==t.tagType&&1==t.value})).length>0?m||((m=document.createElement("button")).setAttribute("class","btn btn-warning m-2"),m.innerText="RESET WARNING",m.onclick=function(t){var e=new XMLHttpRequest;e.onreadystatechange=function(){4==e.readyState&&200==e.status&&console.log(e.responseText)},e.open("GET",u+"/psm/resetWarning",!0),e.setRequestHeader("Content-Type","application/json;charset=UTF-8"),e.send()},v.appendChild(m)):m&&(m.remove(),m=null),t.filter((function(t){return null!=t.value&&(4==t.tagType||12==t.tagType||15==t.tagType)})).forEach((function(t){var n=o.find((function(e){return e.ASI==t.asi}));n&&(n.svgElement.length>0&&15==t.tagType&&T(n,t.value/e*3.543),12==t.tagType&&n.activeSequence!=t.value&&(1==t.value?n.activeSequence=t:n.activeSequence=!1))})),N=t.filter((function(t){return null!=t.value&&0!=t.value&&1==t.tagType})),o.filter((function(t){return 1==t.hasFault&&1==t.persistent&&-1==this.findIndex((function(e){return t.ASI.startsWith(e)}))}),N.map((function(t){if(t.asi)return t.asi.split(",")})).flat().filter(C)).forEach((function(t){t.hasFault=!1,t.svgElement.forEach((function(t){return t.grpObj.querySelector(".fault").remove()}))})),o.filter((function(t){return 0==t.hasFault&&1==t.persistent&&-1!=this.findIndex((function(e){return t.ASI.startsWith(e)}))}),N.map((function(t){if(t.asi)return t.asi.split(",")})).flat().filter(C)).forEach((function(t){t.hasFault=!0,t.svgElement.forEach((function(t){var e=g.createElementNS("http://www.w3.org/2000/svg","rect");e.setAttributeNS(null,"class","fault"),e.setAttributeNS(null,"width",t.grpObj.getBBox().width),e.setAttributeNS(null,"height",t.grpObj.getBBox().height),e.setAttributeNS(null,"x",t.grpObj.getBBox().x),e.setAttributeNS(null,"y",t.grpObj.getBBox().y),t.grpObj.appendChild(e)}))}))}},i.addEventListener("loadend",(function(){setTimeout(Z,x,t,e)})),i.open("GET",t,!0),i.send(null))}var D=n(0),G=Object(D.jsx)("object",{id:"objContainer",data:y});var M={Provider:"http://localhost:10001",Psm:"http://localhost:10002",Scale:100};setTimeout((function(){!function(t,e){s=e.Provider,u=e.Psm;var n=e.Scale?e.Scale:1,i=e.Rotation?e.Rotation:0;f=t,h=t.parentElement,g=t.contentDocument,g.getElementById("svgContainer").style.pointerEvents="none",A=g.getElementById("root"),a=g.getElementById("gLAYOUT"),(d=g.createElementNS("http://www.w3.org/2000/svg","svg")).setAttributeNS(null,"id","gpart"),a.appendChild(d),(c=g.createElementNS("http://www.w3.org/2000/svg","svg")).setAttributeNS(null,"id","gArrows"),a.appendChild(c),o=[];var E=g.createElementNS("http://www.w3.org/2000/svg","path");E.setAttributeNS(null,"d","M0,0 L0,6 L9,3 z"),a.appendChild(E);var b=g.createElementNS("http://www.w3.org/2000/svg","marker");b.setAttributeNS(null,"id","markerTriangolo1"),b.setAttributeNS(null,"markerWidth",10),b.setAttributeNS(null,"markerHeight",10),b.setAttributeNS(null,"markerUnits","strokeWidth"),b.setAttributeNS(null,"refX",5),b.setAttributeNS(null,"refY",3),b.setAttributeNS(null,"orient","auto"),b.setAttributeNS(null,"fill","#007bff"),b.appendChild(E);var S=b.cloneNode(!0);S.setAttributeNS(null,"id","markerTriangolo2"),S.setAttributeNS(null,"fill","green");var O=b.cloneNode(!0);O.setAttributeNS(null,"id","markerTriangolo4"),O.setAttributeNS(null,"fill","yellow");var y=g.createElementNS("http://www.w3.org/2000/svg","defs");a.appendChild(y),y.appendChild(b),y.appendChild(S),y.appendChild(O);var N=g.createElementNS("http://www.w3.org/2000/svg","style");N.innerHTML=".statusLayer {fill: #044b94;opacity: 0.5;} .fault {fill: #FF0000;opacity: 0.5;}",y.appendChild(N),m=null,p=null,0!=i&&i&&(1==i?A.setAttribute("transform","rotate(90 "+.5*A.getBBox().width+" "+.5*A.getBBox().height+")"):2==i?A.setAttribute("transform","rotate(180 "+.5*A.getBBox().width+" "+.5*A.getBBox().height+")"):3==i?A.setAttribute("transform","rotate(270 "+.5*A.getBBox().width+" "+.5*A.getBBox().height+")"):i&&A.setAttribute("transform","rotate("+i+" "+.5*A.getBBox().width+" "+.5*A.getBBox().height+")")),0==e.FloorFilterVisible&&(w=0),r=setTimeout(_,B,s+"/Scada/0/"+w,g,i,n),setTimeout(Z,x,u+"/psm/livestatus",n),(v=document.createElement("div")).style.zIndex=1,v.style.position="absolute",v.className="d-flex flex-column",h.insertBefore(v,f);var T=new XMLHttpRequest;T.open("GET",s+"/Scada/getFloors",!0),T.onload=function(){if(4==T.readyState&&200==T.status){var t=JSON.parse(T.responseText),e=document.createElement("div");e.id="floorsFilter",e.setAttribute("class","dropdown bg-white m-2");var u=document.createElement("button");u.setAttribute("class","btn btn-outline-primary dropdown-toggle w-100"),u.setAttribute("data-toggle","dropdown"),u.setAttribute("type","button"),u.setAttribute("aria-haspopup","true"),u.setAttribute("aria-expanded","false"),u.setAttribute("id","dropdownMenu2"),u.innerHTML="Livello : 1",e.appendChild(u);var d=document.createElement("div");e.appendChild(d),d.setAttribute("aria-labelledby","dropdownMenu2"),d.setAttribute("class","dropdown-menu"),t.map((function(t){return t.PIANO})).filter(C).forEach((function(t){var e=document.createElement("button");e.setAttribute("class","dropdown-item"),e.setAttribute("type","button"),e.innerHTML=t,e.onclick=function(){l.abort(),clearTimeout(r),o.filter((function(t){return t.PIANO==w})).forEach((function(t){if(t.svgElement.length>0){t.svgElement.forEach((function(t){t.grpObj.remove(),t.txtObj&&t.txtObj.remove()})),t.svgElement[0].seqObj&&t.svgElement[0].seqObj.remove();var e=a.getElementById("sl"+t.ASI);e&&e.remove();var n=g.getElementById("lock"+t.ASI);n&&n.remove()}t.udcObjArr.forEach((function(t){t.udcObj.remove()})),t.destObj&&t.svgElement[0].destObj.grpObj.remove()})),o=o.filter((function(t){return t.PIANO!=w||0==t.PIANO||null==t.PIANO})),w=t,u.innerHTML="Livello: "+t,r=setTimeout(_,B,s+"/Scada/0/"+w,g,i,n,!0)},d.appendChild(e)})),v.appendChild(e)}},T.send();var L=document.createElement("div");L.setAttribute("class","btn-group-toggle m-2 bg-white"),L.setAttribute("data-toggle","buttons"),L.innerHTML='<label class="btn btn-outline-primary w-100"><input type="checkbox" autocomplete="off">Show steps</label></div>',L.onclick=function(t){P=!t.target.classList.contains("active")},v.appendChild(L)}(document.getElementById("objContainer"),M)}),3e3);var H=function(){return Object(D.jsx)("div",{className:"App",children:G})},k=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,12)).then((function(e){var n=e.getCLS,o=e.getFID,r=e.getFCP,l=e.getLCP,i=e.getTTFB;n(t),o(t),r(t),l(t),i(t)}))};O.a.render(Object(D.jsx)(b.a.StrictMode,{children:Object(D.jsx)(H,{})}),document.getElementById("root")),k()},8:function(t,e,n){},9:function(t,e,n){}},[[11,1,2]]]);
//# sourceMappingURL=main.781558ff.chunk.js.map